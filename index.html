<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calcolatrice Allineamenti (PWA)</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0a0a0a">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="site-header">
  <div class="brand">
    <h1>Calcolatrice Allineamenti</h1>
    <p class="subtitle">Camber · Caster · Toe | Gradi ↔ mm | Report</p>
  </div>
  <button id="installBtn" class="install-btn" hidden>Installa</button>
</header>

<main>
  <section class="tabs">
    <button class="tab active" data-tab="allineamento">Allineamento</button>
    <button class="tab" data-tab="conversioni">Conversioni</button>
    <button class="tab" data-tab="info">Info</button>
  </section>

  <section id="allineamento" class="tab-panel active">
    <div class="grid">
      <div class="card">
        <h3>Parametri generali</h3>
        <label>Diametro cerchio (pollici)
          <input type="number" id="rimInch" min="8" max="30" step="0.1" value="17">
        </label>
        <label>Strategia correzione toe
          <select id="strategy">
            <option value="A">A) Split 50/50 (volante centrato)</option>
            <option value="B">B) Preserva differenza L/R</option>
            <option value="C">C) Centra volante (L = R)</option>
          </select>
        </label>
      </div>

      <div class="card">
        <h3>Specifiche Anteriore</h3>
        <div class="row-3">
          <label>Camber min (°)<input type="number" id="camberF_lo" step="0.01" value="-1.00"></label>
          <label>Camber max (°)<input type="number" id="camberF_hi" step="0.01" value="0.30"></label>
          <label>Target toe totale (°)<input type="number" id="toeF_target_total" step="0.01" value="0.20"></label>
        </div>
        <h4>Misure Anteriore</h4>
        <div class="row-4">
          <label>Camber FL (°)<input type="number" id="camberFL" step="0.01" value="-0.50"></label>
          <label>Camber FR (°)<input type="number" id="camberFR" step="0.01" value="-0.40"></label>
          <label>Caster FL (°)<input type="number" id="casterFL" step="0.01" value="4.50"></label>
          <label>Caster FR (°)<input type="number" id="casterFR" step="0.01" value="4.40"></label>
          <label>Toe FL (°)<input type="number" id="toeFL" step="0.01" value="0.10"></label>
          <label>Toe FR (°)<input type="number" id="toeFR" step="0.01" value="0.05"></label>
        </div>
      </div>

      <div class="card">
        <h3>Specifiche Posteriore</h3>
        <div class="row-3">
          <label>Camber min (°)<input type="number" id="camberR_lo" step="0.01" value="-1.50"></label>
          <label>Camber max (°)<input type="number" id="camberR_hi" step="0.01" value="-0.50"></label>
          <label>Target toe totale (°)<input type="number" id="toeR_target_total" step="0.01" value="0.20"></label>
        </div>
        <h4>Misure Posteriore</h4>
        <div class="row-4">
          <label>Camber RL (°)<input type="number" id="camberRL" step="0.01" value="-1.00"></label>
          <label>Camber RR (°)<input type="number" id="camberRR" step="0.01" value="-0.90"></label>
          <label>Toe RL (°)<input type="number" id="toeRL" step="0.01" value="0.08"></label>
          <label>Toe RR (°)<input type="number" id="toeRR" step="0.01" value="0.09"></label>
        </div>
      </div>

      <div class="card actions">
        <button id="calcBtn">Calcola</button>
        <button id="resetBtn" class="secondary">Reset</button>
        <button id="saveBtn" class="ghost">Esporta report .txt</button>
      </div>

      <div class="card full">
        <h3>Report</h3>
        <textarea id="report" rows="16" spellcheck="false"></textarea>
      </div>
    </div>
  </section>

  <section id="conversioni" class="tab-panel">
    <div class="card">
      <h3>Conversioni Toe (per ruota)</h3>
      <label>Diametro cerchio (pollici)
        <input type="number" id="convRim" min="8" max="30" step="0.1" value="17">
      </label>
      <div class="row-2">
        <div>
          <h4>Gradi → mm</h4>
          <label>Toe (°) per ruota <input type="number" id="degIn" step="0.0001" value="0.10"></label>
          <button id="deg2mm">Converti</button>
          <p class="result" id="mmOut">–</p>
        </div>
        <div>
          <h4>mm → Gradi</h4>
          <label>Toe (mm) per ruota <input type="number" id="mmIn" step="0.001" value="1.00"></label>
          <button id="mm2deg">Converti</button>
          <p class="result" id="degOut">–</p>
        </div>
      </div>
    </div>
  </section>

  <section id="info" class="tab-panel">
    <div class="card">
      <h3>Note e convenzioni</h3>
      <ul>
        <li><b>Toe +</b> = toe-in; negativo = toe-out.</li>
        <li>Le conversioni mm sono stime al <b>diametro del cerchio</b> usando trigonometria per piccoli angoli.</li>
        <li>Strategie:
          <ul>
            <li><b>A</b> – Split 50/50: L=R = target/2 (volante centrato).</li>
            <li><b>B</b> – Preserva differenza L/R: mantiene L−R attuale.</li>
            <li><b>C</b> – Centra volante: forza L=R, annullando la differenza.</li>
          </ul>
        </li>
        <li>Questa PWA funziona anche <b>offline</b>: usa “Aggiungi alla schermata Home”.</li>
      </ul>
      <p class="muted">© 2025 Alessandro Pezzali – PezzaliAPP. Uso educativo.</p>
    </div>
  </section>
</main>

<footer class="site-footer">
  <small>Calcolatrice Allineamenti — PWA • v1.0</small>
</footer>

<script src="app.js"></script>
</body>
</html>
